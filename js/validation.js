"use strict";!function(){var t,i=document.querySelector(".form"),e=document.querySelector(".form__submit"),n=document.querySelector(".form__fieldset"),o=document.querySelector(".select"),a=function(e){e.nextElementSibling.focus()},r=function(e){c(e.target)},c=function(e){e?(window.hint(e),e.validity.valid?e.classList.remove(window.constants.CLASSES.ERROR):e.classList.add(window.constants.CLASSES.ERROR)):Array.prototype.slice.call(i.elements).forEach(function(e){window.hint(e),e.validity.valid?e.classList.remove(window.constants.CLASSES.ERROR):e.classList.add(window.constants.CLASSES.ERROR)})},l=function(){Array.prototype.slice.call(i.elements).forEach(function(e){for(var t=0;t<e.children.length;t++){if(e.children[t].validity&&!e.children[t].validity.valid)return void window.createErrorMessage(e,e.children[t].validationMessage);window.createErrorMessage(e,"")}})},s=function(){window.popup("Данные успешно отправлены!"),i.reset()},d=function(e){window.popup(e)};e.addEventListener("click",function(e){if(e.preventDefault(),c(),Array.prototype.slice.call(i.elements).forEach(function(e){"input"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase()?e.addEventListener("input",r):"fieldset"===e.tagName.toLowerCase()&&e.addEventListener("change",l)}),l(),n=!0,Array.prototype.slice.call(i.elements).forEach(function(e){e.validity.valid||(n=!1)}),n){var t=new FormData;window.backend("POST",window.constants.URL,s,d,t)}var n}),t=function(e){var t=e.target;4===t.value.length&&t.nextElementSibling&&a(t)},Array.prototype.slice.call(n.children).forEach(function(e){e.addEventListener("input",t)}),o.addEventListener("change",function(e){a(e.target)})}();